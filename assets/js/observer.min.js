function PsObserver(){this.listeners={}}var ps_observer=new PsObserver;PsObserver.prototype.add_filter=function(a,b,c,d,e){if(void 0===c&&(c=10),typeof b==typeof Function){filter={callback:b,priority:c,params:d,this_obj:e};this.listeners;"undefined"==typeof this.listeners[a]&&(this.listeners[a]={}),cb_id=this.build_filter_unique_id(a,b),"undefined"==typeof this.listeners[a][c]&&(this.listeners[a][c]={}),this.listeners[a][c][cb_id]=filter}},PsObserver.prototype.remove_filter=function(a,b,c){void 0===c&&(c=10),cb_id=this.build_filter_unique_id(a,b),delete this.listeners[a][c][cb_id]},PsObserver.prototype.apply_filters=function(a){var b=arguments;data="";try{var c=this.listeners[a];if("undefined"==typeof c)return b[1];jQuery.each(c,function(a,c){jQuery.each(c,function(a,c){if(void 0!==c.params){for(callback_args=[],index=1;index<=c.params;)callback_args.push(b[index]),index++;data=c.callback.apply(c.this_obj,callback_args),b[1]=data}else data=c.callback()})})}catch(d){$PeepSo.log("!!Exception thrown in PsObserver.apply_filters():"),$PeepSo.log(d)}return data},PsObserver.prototype.build_filter_unique_id=function(a,b){var c=a+b.toString();return c.hashCode()},String.prototype.hashCode=function(){var a=0;if(0===this.length)return a;for(i=0;i<this.length;i++)char=this.charCodeAt(i),a=(a<<5)-a+char,a&=a;return a};