function cValidate(){this.message="",this.REM="info is required. Make sure it contains a valid value!",this.noticeTitle="Notice",this.errorField=new Array,this.customMessage="",this.JOINTEXT=",",this.init=function(){jQuery("#peepso-wrap form.peepso-form-validate :input.required").blur(function(){!jQuery(this).hasClass("validate-custom-date")&&!jQuery(this).hasClass("validate-country")&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-profile-email").blur(function(){""!==jQuery.trim(jQuery(this).val())&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-profile-url").blur(function(){""!==jQuery.trim(jQuery(this).val())&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-country").change(function(){jQuery(this).hasClass("required")&&(cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this))}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-custom-date").blur(function(){cvalidate.validateElement(this)?cvalidate.markValid(this):cvalidate.markInvalid(this)}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-custom-date").keydown(function(a){46===a.keyCode||8===a.keyCode||9===a.keyCode||27===a.keyCode||13===a.keyCode||65===a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39||(a.shiftKey||(a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))&&a.preventDefault()}),jQuery("#peepso-wrap form.peepso-form-validate :input.validateSubmit").click(function(){if(cvalidate.validateForm())return!0;var a="undefined"===cvalidate.REM||""===cvalidate.REM?"info is required. Make sure it contains a valid value!":cvalidate.REM;if(cvalidate.errorField.length>1?(lastField=cvalidate.errorField.pop(),jQuery(cvalidate.errorField).each(function(b,c){cvalidate.errorField[b]=c+" "+a}),strErrField=cvalidate.errorField.join("<br />")+"<br />"+lastField+" "+a):strErrField=cvalidate.errorField,a=strErrField,""!==cvalidate.customMessage&&(a=cvalidate.customMessage),jQuery("#tnc").hasClass("required")&&cvalidate.errorField.length<1){var b=jQuery("#tnc:checked").val(),a=jQuery("#tnc").data("message");a="Y"!==b?a:cvalidate.REM}return"string"==typeof a&&(a=a.replace(/\n/g,""),a=a.replace("'","\\'")),jQuery("#peepso-wrap form.peepso-form-validate :input.required[value='']").each(function(a){cvalidate.markInvalid(this)}),!1})},this.setMaxLength=function(a,b){jQuery(a).keyup(function(){var a=parseInt(b);jQuery(this).val().length>a&&jQuery(this).val(jQuery(this).val().substr(0,b))})},this.markInvalid=function(a){var b=a.name;jQuery(a).hasClass("validate-custom-date")?(jQuery("#peepso-wrap form.peepso-form-validate input[name='"+b+"']").addClass("invalid"),jQuery("#peepso-wrap form.peepso-form-validate select[name='"+b+"']").addClass("invalid")):jQuery(a).addClass("invalid")},this.markValid=function(a){var b=a.name;jQuery(a).hasClass("validate-custom-date")?(jQuery("#peepso-wrap form.peepso-form-validate input[name='"+b+"']").removeClass("invalid"),jQuery("#peepso-wrap form.peepso-form-validate select[name='"+b+"']").removeClass("invalid")):jQuery(a).removeClass("invalid"),null!==b&&(b=b.replace("[]",""),jQuery("#err"+b+"msg").hide(),jQuery("#err"+b+"msg").html("&nbsp"))},this.validateElement=function(a){var b=!0,c=a.name,d=jQuery(a).attr("type"),e=jQuery.trim(jQuery(a).val());if("text"===d||"password"===d||jQuery(a).is("textarea"))if(""===e)jQuery(a).hasClass("required")&&(b=!1,c=c.replace("[]",""),lblName=jQuery("#lbl"+c).html(),null===lblName?lblName="Field":lblName=lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"));else{if(jQuery(a).hasClass("validate-name")&&(jQuery(a).val().length<3?(this.setMessage(c,"","COM_COMMUNITY_NAME_TOO_SHORT"),b=!1):(jQuery("#err"+c+"msg").hide(),jQuery("#err"+c+"msg").html("&nbsp"),b=!0)),jQuery(a).hasClass("validate-username")&&jQuery("#usernamepass").val()!==jQuery(a).val()&&(b=cvalidate.ajaxValidateUserName(jQuery(a))),jQuery(a).hasClass("validate-email")&&(regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,4})$/i,b=regex.test(jQuery(a).val()),b===!1?this.setMessage(c,"","COM_COMMUNITY_INVALID_EMAIL"):(jQuery("#err"+c+"msg").hide(),jQuery("#err"+c+"msg").html("&nbsp"),jQuery("#emailpass").val()!==jQuery(a).val()&&(b=cvalidate.ajaxValidateEmail(jQuery(a))))),jQuery(a).hasClass("validate-profile-email")&&(regex=/^([*+!.&#$¦\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,6})$/i,b=regex.test(jQuery(a).val()),b===!1?this.setMessage(c,"","COM_COMMUNITY_INVALID_EMAIL"):(jQuery("#err"+c+"msg").hide(),jQuery("#err"+c+"msg").html("&nbsp"))),jQuery(a).hasClass("validate-profile-url")){var f=jQuery(a).val();f.match("http://")&&(f=f.replace("http://",""),jQuery(a).prev("select").find("option").removeAttr("selected").filter('[value="http://"]').attr("selected","selected")),f.match("https://")&&(f=f.replace("https://",""),jQuery(a).prev("select").find("option").removeAttr("selected").filter('[value="https://"]').attr("selected","selected")),jQuery(a).val(f),c=c.replace("[]",""),regex=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,b=regex.test(jQuery(a).val()),b===!1?this.setMessage(c,"","COM_COMMUNITY_INVALID_URL"):(jQuery("#err"+c+"msg").hide(),jQuery("#err"+c+"msg").html("&nbsp"))}if(jQuery(a).hasClass("validate-password")&&"jspassword"===a.name&&(jQuery(a).val().length<6?(this.setMessage(c,"","COM_COMMUNITY_PASSWORD_TOO_SHORT"),b=!1):(jQuery("#err"+c+"msg").hide(),jQuery("#err"+c+"msg").html("&nbsp"),b=!0)),jQuery(a).hasClass("validate-passverify")&&"jspassword2"===a.name)if(b=jQuery("#jspassword").val()===jQuery(a).val(),b===!1){var g=jQuery("input[name=task]").val();"register_save"===g?this.setMessage("jspassword2","","COM_COMMUNITY_REGISTER_PASSWORD_NOT_SAME"):this.setMessage("jspassword2","","COM_COMMUNITY_PASSWORD_NOT_SAME")}else jQuery("#errjspassword2msg").hide(),jQuery("#errjspassword2msg").html("&nbsp");jQuery(a).hasClass("validate-custom-date")&&(b=this.checkCustomDate(a))}else"checkbox"===jQuery(a).attr("type")?jQuery(a).hasClass("validate-custom-checkbox")?(0===jQuery("#peepso-wrap form.peepso-form-validate input[name='"+c+"']:checked").size()&&(b=!1),b===!1&&(c=c.replace("[]",""),lblName=jQuery("#lbl"+c).html(),null===lblName?lblName="Field":lblName=lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):jQuery(a).attr("checked")||(b=!1):"radio"===jQuery(a).attr("type")?jQuery(a).hasClass("validate-custom-radio")?(0===jQuery("#peepso-wrap form.peepso-form-validate input[name='"+c+"']:checked").size()&&(b=!1),b===!1&&(lblName=jQuery("#lbl"+c).html(),null===lblName?lblName="Field":lblName=lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):jQuery(a).attr("checked")||(b=!1):jQuery(a).is("select")?(0===jQuery(a).children(":selected").length?b=!1:jQuery(a).children(":selected").each(function(){""===jQuery(a).val()&&(b=!1)}),jQuery(a).hasClass("validate-country")&&"selectcountry"===jQuery(a).val()&&(b=!1),jQuery(a).hasClass("validate-custom-date")?b=this.checkCustomDate(a):b===!1&&(c=c.replace("[]",""),lblName=jQuery("#lbl"+c).html(),null===lblName?lblName="Field":lblName=lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE"))):"select-multiple"===jQuery(a).attr("type")&&(0===jQuery(a).children(":selected").length&&(b=!1),b===!1&&(c=c.replace("[]",""),lblName=jQuery("#lbl"+c).html(),null===lblName?lblName="Field":lblName=lblName.replace("*",""),this.setMessage(c,lblName,"COM_COMMUNITY_REGISTER_INVALID_VALUE")));return b},this.validateForm=function(){var a=!0;return this.errorField=new Array,jQuery("#peepso-wrap form.peepso-form-validate :input.required").each(function(){cvalidate.validateElement(this)||(a=!1)}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-profile-email").each(function(){""!==jQuery.trim(jQuery(this).val())&&(cvalidate.validateElement(this)||(a=!1))}),jQuery("#peepso-wrap form.peepso-form-validate :input[class*=minmax]").each(function(){if(this.className.indexOf("minmax")>-1)for(var b=jQuery(this).attr("class").split(" "),c=0;c<b.length;c++)if(0===b[c].indexOf("minmax")){var d=b[c].split("_")[1],e=b[c].split("_")[2],f=jQuery.trim(jQuery(this).val()).length;f>=d&&e>=f||(cvalidate.setMessage(jQuery(this).attr("id"),"","COM_COMMUNITY_REGISTER_INVALID_CHAR_COUNT",d,e),a=!1);break}}),jQuery("#peepso-wrap form.peepso-form-validate :input.validate-profile-url").each(function(){""!==jQuery.trim(jQuery(this).val())&&(cvalidate.validateElement(this)||(a=!1))}),a},this.ajaxValidateUserName=function(a){jax.call("community","register,ajaxCheckUserName",jQuery(a).val())},this.ajaxValidateEmail=function(a){jax.call("community","register,ajaxCheckEmail",jQuery(a).val())},this.checkCustomDate=function(el){var isValid=!0,fieldName=el.name;if(jQuery(el).hasClass("validate-custom-date")){fieldId=fieldName.replace("[]","");for(var dateObj=jQuery("#peepso-wrap form.peepso-form-validate input[name='"+fieldName+"']"),i=0;i<dateObj.length;i++)/^-?\d+$/.test(dateObj[i].value)||(isValid=!1);var dateObj2=jQuery("#peepso-wrap form.peepso-form-validate select[name='"+fieldName+"']"),dd=dateObj[0].value,mm=dateObj2[0].value,yy=dateObj[1].value,dayobj=new Date(yy,eval(mm-1),dd);(dayobj.getMonth()+1!==mm||dayobj.getDate()!==dd||dayobj.getFullYear()!==yy)&&(isValid=!1),isValid===!1?this.setMessage(fieldId,"","COM_COMMUNITY_INVALID_DATE"):(jQuery("#err"+fieldId+"msg").hide(),jQuery("#err"+fieldId+"msg").html("&nbsp"))}return isValid},this.setMessage=function(a,b,c,d,e){jQuery('label[for="'+a+'"]').length<0||"undefined"!=typeof jQuery('label[for="'+a+'"]').html()&&(errorLabel=jQuery('label[for="'+a+'"]').html().replace("*",""),-1===jQuery.inArray(errorLabel,this.errorField)&&this.errorField.push(errorLabel),jax.call("community","register,ajaxSetMessage",a,b,c,d,e))},this.setSystemText=function(key,text){eval("cvalidate."+key+' = "'+text+'"')}}var cvalidate=new cValidate;!function(a){var b=new function(){this.countRegexp=function(a,b){var c=a.match(b);return c?c.length:0},this.getStrength=function(a,b){var c=a.length;if(b>c)return 0;var d=this.countRegexp(a,/\d/g),e=this.countRegexp(a,/[a-z]/g),f=this.countRegexp(a,/[A-Z]/g),g=c-d-e-f;if(d===c||e===c||f===c||g===c)return 1;var h=0;return d&&(h+=2),e&&(h+=f?4:3),f&&(h+=e?4:3),g&&(h+=5),c>10&&(h+=1),h},this.getStrengthLevel=function(a,b){var c=this.getStrength(a,b);switch(!0){case 0>=c:return 1;case c>0&&4>=c:return 2;case c>4&&8>=c:return 3;case c>8&&12>=c:return 4;case c>12:return 5}return 1}};a.fn.password_strength=function(c){var d=a.extend({container:null,minLength:6,texts:{1:"Too weak",2:"Weak password",3:"Normal strength",4:"Strong password",5:"Very strong password"}},c);return this.each(function(){if(d.container)var c=a(d.container);else{var c=a("<span/>").attr("class","jsPasswordStrength");a(this).after(c)}a(this).keyup(function(){var e=a(this).val();if(e.length>0){var f=b.getStrengthLevel(e,d.minLength),g="jsPasswordStrength_"+f;!c.hasClass(g)&&f in d.texts&&(c.text(d.texts[f]).attr("class","jsPasswordStrength "+g),1===f?a("#btnSubmit").attr("disabled",!0):a("#btnSubmit").attr("disabled",!1))}else c.text("").attr("class","jsPasswordStrength")})})}}(jQuery);